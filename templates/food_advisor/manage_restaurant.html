{% extends 'base.html' %}
{% load static %}

{% block title %}
    Food Advisor - {{ restaurant.name }} (Manager Interface)
{% endblock title %}

{% block content %}
    {% if restaurant %}
        <div class="container mt-5">
            <h2>Manage Restaurant Information</h2>
            <form enctype="multipart/form-data" id="restaurant_manage_form" method="post" action="{% url 'food_advisor:manage_restaurant' restaurant.id %}" class="needs-validation" novalidate>
                {% csrf_token %}
                <div class="form-row">
                    {% for field in form.visible_fields %}
                        <div class="col-md-4 mb-3">
                            <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                            {{ field.errors }}
                            {% if field.name == 'cuisineTypes' %}
                                <select name="{{ field.name }}" class="form-control" id="{{ field.id_for_label }}">
                                    <option value="" {% if not field.value %}selected{% endif %}>请选择餐厅类型</option>
                                    <option value="chinese" {% if 'chinese' in field.value %}selected{% endif %}>Chinese</option>
                                    <option value="indian" {% if 'indian' in field.value %}selected{% endif %}>Indian</option>
                                    <option value="italian" {% if 'italian' in field.value %}selected{% endif %}>Italian</option>
                                    <option value="japanese" {% if 'japanese' in field.value %}selected{% endif %}>Japanese</option>
                                    <option value="mexican" {% if 'mexican' in field.value %}selected{% endif %}>Mexican</option>
                                    <option value="thai" {% if 'thai' in field.value %}selected{% endif %}>Thai</option>
                                    {% for value, display_text in field.field.choices %}
                                        {% if value != 'chinese' %}
                                            <option value="{{ value }}" {% if field.value == value %}selected{% endif %}>{{ display_text }}</option>
                                        {% endif %}
                                    {% endfor %}
                                </select>
                            {% else %}
                                <input type="{{ field.field.widget.input_type }}" name="{{ field.name }}" class="form-control" id="{{ field.id_for_label }}" {% if field.field.required %}required{% endif %}>
                            {% endif %}
                            <div class="invalid-feedback">
                                请提供有效的 {{ field.name }}。
                            </div>
                        </div>
                    {% endfor %}
                </div>
                <button class="btn btn-primary" type="submit">Update Restaurant Info</button>
            </form>
        </div>
    {% else %}
        <div class="alert alert-danger" role="alert">
            指定的餐厅不存在。
        </div>
    {% endif %}
{% endblock content %}
